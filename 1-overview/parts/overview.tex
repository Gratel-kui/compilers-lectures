% overview.tex

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \fig{width = 0.80\textwidth}{figs/welcome-again}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    {\Large the ``father of the analysis of algorithms''}
  \end{center}

  \begin{columns}
    \column{0.50\textwidth}
      \fig{width = 0.70\textwidth}{figs/knuth-chair}
      \begin{center}
        \teal{Donald E. Knuth (1938 $\sim$)}
      \end{center}
    \column{0.50\textwidth}
      \fig{width = 0.80\textwidth}{figs/taocp-box}
  \end{columns}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \fig{width = 0.30\textwidth}{figs/selected-papers-lang}

  \begin{center}
    \red{ALGOL 58 Compiler \qquad {\bf LR Parser} \qquad {\bf Attribute Grammar}}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \fig{width = 0.40\textwidth}{figs/video}

    \vspace{0.50cm}
    \href{https://youtu.be/QeiuVNDQg4k}{``I got a job at the end of my senior year 
    \\ to write a compiler for Burroughs''}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \[
      \text{``高级''语言 $\implies$ \gray{(通常)} ``低级''语言 (如, 汇编语言)}
    \]
    汇编语言经过{\bf 汇编器}生成机器语言

    \vspace{0.30cm}
    \fig{width = 0.40\textwidth}{figs/compiler-blackbox}

    \vspace{0.30cm}
    \red{$Q:$ 机器语言是如何跑起来的?}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    {\large 两个月的``编译器设计原理''之旅}

    \fig{width = 0.35\textwidth}{figs/keep-calm-open-box}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
% \begin{frame}[fragile]{}
%   \begin{columns}
%     \column{0.60\textwidth}
%       \fig{width = 0.80\textwidth}{figs/lang-processing-system}
%     \column{0.40\textwidth}
%       \fig{width = 0.80\textwidth}{figs/gcc-v}
%   \end{columns}
% \end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    IR: Intermediate Representation (中间表示)
    \vspace{0.50cm}

    \fig{width = 0.80\textwidth}{figs/front-back}

    \vspace{0.50cm}
    前端 \red{\bf (分析阶段)}: 分析源语言程序, 收集所有必要的信息 \\[8pt]
    后端 \red{\bf (综合阶段)}: 利用收集到的信息, 生成目标语言程序
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \fig{width = 0.80\textwidth}{figs/optimizer}

    \vspace{0.50cm}
    机器无关的中间表示优化
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{columns}
    \column{0.50\textwidth}
      \begin{center}
        编译器前端: 分析阶段
        \fig{width = 0.95\textwidth}{figs/front-end}

        \teal{前四次必做实验}
      \end{center}
    \column{0.50\textwidth}
      \begin{center}
        编译器后端: 综合阶段
        \fig{width = 0.50\textwidth}{figs/back-end}

        \teal{第五次选做实验}
      \end{center}
  \end{columns}

  \pause
  \fig{width = 0.50\textwidth}{figs/assignment}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \red{\bf 词法分析器 (Lexer/Scanner):} 将{\bf 字符}流转化为{\bf 词法单元} (token) 流。

    \[
      \boxed{\text{token}: \langle \text{token-class}, \text{attribute-value} \rangle}
    \]

    \begin{align*}
    \langle \id, \red{1} \rangle \quad 
    \langle \ws \rangle \quad
    \langle \assign \rangle \quad
    \langle \ws \rangle \quad
    \langle \id, \red{2} \rangle \quad
    \langle \ws \rangle \quad \\
    \langle + \rangle \quad
    \langle \ws \rangle \quad
    \langle \id, \red{3} \rangle \quad
    \langle \ws \rangle \quad
    \langle \ast \rangle \quad
    \langle \ws \rangle \quad
    \langle \num, \red{4} \rangle
    \end{align*}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \red{\bf 语法分析器 (Parser):} 构建{\bf 词法单元}之间的语法结构, 生成{\bf 语法树}

    \vspace{0.80cm}
    % \fig{width = 0.50\textwidth}{figs/assignment}
    \fig{width = 0.50\textwidth}{figs/syntax-tree}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \red{\bf 语义分析器:} 语义检查, 如{\bf 类型检查}、{\bf ``先声明后使用''约束检查}

    \vspace{0.80cm}
    % \fig{width = 0.50\textwidth}{figs/assignment}
    \fig{width = 0.50\textwidth}{figs/semantic-analysis}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \red{\bf 中间代码生成器:} 生成中间代码, 如 {\bf ``三地址代码''}

    \vspace{0.80cm}
    % \fig{width = 0.50\textwidth}{figs/assignment}
    \fig{width = 0.50\textwidth}{figs/ICG}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \red{\bf 中间代码优化器}

    \vspace{0.80cm}
    % \fig{width = 0.50\textwidth}{figs/assignment}
    \fig{width = 0.50\textwidth}{figs/CO}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \red{\bf 代码生成器:} 生成目标代码, 主要任务包括{\bf 指令选择、寄存器分配}

    \vspace{0.80cm}
    % \fig{width = 0.50\textwidth}{figs/assignment}
    \fig{width = 0.50\textwidth}{figs/CG}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \red{\bf 符号表:} 收集并管理{\bf 变量名/函数名}相关的信息
  \end{center}

  \fig{width = 0.40\textwidth}{figs/symbol-table}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \fig{width = 0.80\textwidth}{figs/st-api}

  \vspace{0.50cm}
  \begin{center}
    红黑树 (RB-Tree)、哈希表 (Hashtable)
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    为了方便表达嵌套结构与作用域, 可能需要维护多个符号表
  \end{center}

  \fig{width = 0.50\textwidth}{figs/nested-symbol-tables}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{}
  \begin{center}
    \red{\bf 时间苦短, 来不及优化}
  \end{center}

  \begin{columns}
    \column{0.50\textwidth}
      \fig{width = 0.95\textwidth}{figs/front-end}
    \column{0.50\textwidth}
       \fig{width = 0.50\textwidth}{figs/back-end}
  \end{columns}

  \vspace{0.30cm}
  \begin{center}
    但是, 在设计实际生产环境中的编译器时, {\bf 优化}通常占用了大多数时间
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%